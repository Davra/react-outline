{"version":3,"sources":["../source/main.js"],"names":["userSetOptions","named","topLevelWrapStyles","_styles","options","styleCSS","Error","JSON","stringify","Array","isArray","Object","assign","base","fns","optionsIsFns","prop","hasOwnProperty","wrappedStyles","wrapStyles","colors","caching","replacedStyle","keys","concat","filter","item","pos","a","indexOf","styleName","forEach","styleFn","cached","key","value","source","args","elemName","inlineStyle","baseStyle","propN","includes","match","RegExp","css","style","randomClassName","global","__TEST__","publish","styleStuff","length","withOptions","setOptions","buildCssString","props","classesValues","get","map","className","join","children","replace","Styles","StylesElem","createClass","displayName","getInitialState","subscribe","setTimeout","setState","cssString","render","state","createElement","toString","testing","resetCSS","clear"],"mappings":"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","file":"main.js","sourcesContent":["\nimport React from 'react'\nimport { classes, hasKids, specialCharacters, specialInnerCharacters, separateCssStyle, genStyles, genCss, makeid } from './utils'\n\nimport element from './element'\n\n\n\nconst userSetOptions = { named:true/* prefix:getVendorPrefix()*/ }\n\n//+++++++++++++++++++++++++++++ { base:{}, foo: ()=> }\n//++++++++++++++++++++++++++++++++++++++++++++++++++++\nfunction topLevelWrapStyles(_styles,options={},styleCSS={}){\n\nif(\"object\" !== typeof _styles){\n  throw new Error(\"Bad style values: \"+JSON.stringify(_styles))\n}\n\n//+++++++++++++++++++++++++++++++++++++++ [ base, fn ]\n//++++++++++++++++++++++++++++++++++++++++++++++++++++\nif(Array.isArray(_styles)){\n\n    _styles = Object.assign({},{base:_styles[0]},_styles[1])\n\n} else if(!(\"base\" in _styles)) {\n\n  const base = {}, fns = {};\n\n//++++++++++++++ { table: {}, header:{} }, fn:{ ()=> }\n//++++++++++++++++++++++++++++++++++++++++++++++++++++\n\n  let optionsIsFns = true;\n\n  for(const prop in options){\n      if(options.hasOwnProperty(prop) && \"function\" !== typeof options[prop]){\n        optionsIsFns = false;\n      }\n  }\n\n  if(optionsIsFns){\n    Object.assign(fns,options)\n  }\n\n  for(const prop in _styles){\n//+++++++++++++++++++++++++++ { table: {}, header:{} }\n//++++++++++++++++++++++++++++++++++++++++++++++++++++\n      if(\"object\" === typeof _styles[prop]){\n        base[prop] = _styles[prop]\n//++++++++++++++++++++++++++++++++++++++ { foo: ()=> }\n//++++++++++++++++++++++++++++++++++++++++++++++++++++\n      } else if(\"function\" === typeof _styles[prop]){\n        fns[prop] = _styles[prop]\n      } else {\n        throw new Error(\"Bad style value: \"+JSON.stringify(_styles[prop]))\n      }\n  }\n  _styles = Object.assign({},{base},fns);\n}\n\n  const wrappedStyles = wrapStyles(_styles,options,styleCSS);\n        wrappedStyles.colors = wrappedStyles.colors\n                            || options        && options.colors\n                            || userSetOptions && userSetOptions.colors;\n  return wrappedStyles;\n}\n\n\nfunction wrapStyles(_styles,options,styleCSS){\n\n  options = Object.assign({},userSetOptions,options);\n//  const radium = !!options.radium;\n  const caching = !!options.caching;\n  const colors = options.colors;\n  styleCSS = _styles.base || styleCSS\n  const replacedStyle = {}\n  if(_styles.base)\n    replacedStyle.base = styleCSS;\n\n  Object.keys(_styles)\n  .concat(Object.keys(styleCSS))\n  .filter((item, pos, a)=> a.indexOf(item) === pos )\n  .filter(styleName => \"base\" !== styleName)\n  .forEach((styleName)=>{\n\n    const styleFn = _styles[styleName]||(()=>{});\n\n    const cached = { key:null, value:null, source:[] }\n    replacedStyle[styleName] = function(...args) {\n      let elemName = args[0];\n      if(Array.isArray(elemName) && elemName.hasOwnProperty(\"raw\")){\n\n        elemName = elemName[0] || args[1];\n        let inlineStyle = null;//replacedStyle[styleName]();\n\n        const baseStyle = styleCSS[styleName] && styleCSS[styleName].base || {}\n        for(const propN in styleCSS[styleName]){\n          if(specialCharacters.includes(propN[0]) || !!propN.match(new RegExp(`[${specialInnerCharacters}]`, \"gi\"))){\n            baseStyle[propN] = styleCSS[styleName][propN]\n          }\n        }\n        //splict \":\" and \"@\" from all over styles\n        const { css, style } = separateCssStyle(baseStyle);\n        /*\n        const cssPropNames = Object.keys(styleCSS[styleName])\n                                   .filter(stylePropName => stylePropName[0] === \"@\" ||  stylePropName[0] === \":\");\n        */\n        let randomClassName = \"\";\n\n        //if(0 < cssPropNames.length){\n        if(css){\n\n          randomClassName = \"react-outline-\"\n\n          if(!global.__TEST__)\n              randomClassName += makeid();\n\n        classes.publish(randomClassName,genCss({randomClassName, css,styleCSS, colors,style,styleName}))\n\n         inlineStyle = {};\n        }\n\n        return element({elemName, css,styleCSS,inlineStyle,style,styleName, colors, randomClassName, options,randomClassName,replacedStyle})\n\n      } // elem gen\n\n      const styleStuff = { styleCSS:styleCSS[styleName],styleFn/*,radium*/ };\n\n      if(!caching){\n        return genStyles(styleStuff,args,colors);\n      }\n      // quick test\n      if(cached.value && cached.source[0] === args[0] && cached.source[0] === args[1]){\n        return cached.value;\n      }\n      // deep test\n      const key = \"\"+JSON.stringify(args[0])+JSON.stringify(args[1])\n      if(key === cached.key){\n        return cached.value;\n      }\n\n      cached.key = key;\n      cached.source[0] = args[0];\n      cached.source[1] = args[1];\n      cached.value = genStyles(styleStuff,args,colors);\n      return cached.value;\n  } // END replacedStyle[styleName] = function(...args)\n\n    if(0 < Object.keys(styleFn).length || hasKids(styleCSS[styleName])){\n      Object.assign(replacedStyle[styleName], wrapStyles(styleFn,options,styleCSS[styleName]))\n    }\n  })\n  return replacedStyle\n}\n\n\nfunction withOptions(options){\n  if(!options) throw new Error(\"Bad options values for react-outline:\"+JSON.stringify(options))\n  return (_styles)=>topLevelWrapStyles(_styles,options)\n}\n\nfunction setOptions(options){\n  if(!options) throw new Error(\"Bad options values for react-outline:\"+JSON.stringify(options))\n  if(options.colors){\n    topLevelWrapStyles.colors = options.colors\n  }\n  Object.assign(userSetOptions,options)\n}\nfunction buildCssString(props={}){\nconst  classesValues = classes.get()\n let css = Object.keys(classesValues).map(className => classesValues[className] ).join(\" \");\n  css += props.children || \"\";\n  css = css.replace(/\\n/g, ' ').replace(/\\s+/g, ' ');\n  return css\n}\nfunction Styles(props){\n\n  const StylesElem = React.createClass({\n  displayName: \"Styles\",\n  getInitialState: function getInitialState() {\n    // setTimeout to fix: Warning: setState(...): Cannot update during an existing state transition\n    classes.subscribe(()=> setTimeout(()=>this.setState({cssString:buildCssString(props)}), 0) )\n    return { cssString : buildCssString(props)};\n  },\n  render: function render() {\n    return <style>{this.state.cssString}</style>;\n  }\n})\n  return React.createElement(StylesElem)\n}\n\nStyles.toString = ()=>buildCssString()\n\nconst testing = {\n  resetCSS: classes.clear\n}\n\nexport default topLevelWrapStyles\nexport { withOptions, setOptions, Styles, testing }\n"]}